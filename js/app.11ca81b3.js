(function(){"use strict";var t={2927:function(t,e,s){var o=s(5471),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"jumbotron"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[t._m(0),e("button",{staticClass:"test-elem",on:{click:t.deleteAllCaches}},[e("font-awesome-icon",{attrs:{icon:"fas fa-trash"}}),t._v(" Delete All Caches ")],1),e("button",{staticClass:"test-elem",on:{click:t.unregisterAllServiceWorkers}},[e("span",{staticClass:"fab fa-uniregistry"}),t._v(" Unregister All ServiceWorkers ")]),e("div",{staticClass:"col-md-6"},[e("form",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTxt,expression:"searchTxt"}],staticClass:"search_form",attrs:{type:"text",placeholder:"Search Courses"},domProps:{value:t.searchTxt},on:{keyup:t.searchLessons,input:function(e){e.target.composing||(t.searchTxt=e.target.value)}}})])]),e("div",{staticClass:"col"},[e("button",{staticClass:"cart-button btn",attrs:{disabled:t.cartItems.length<=0},on:{click:t.updateShowProduct}},[e("i",{staticClass:"fa fa-shopping-cart"}),t._v(" Cart "+t._s(t.cartCount())+" ")])])])])]),t._m(1),t.showProduct?e("section",{attrs:{id:"product"}},[e("Lessons",{attrs:{lessons:t.lessons},on:{addLesson:t.addLessonToCart}})],1):e("section",{attrs:{id:"check-out"}},[e("Checkout",{attrs:{cartItems:t.cartItems},on:{removeLesson:t.removeLessonFromCart,checkOut:t.checkOut}})],1)])},c=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col"},[e("h2",{staticClass:"logo"},[t._v("Lesson")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid nav_view p-4"},[e("h3",{staticClass:"text-center"},[t._v(" Home | Store ")])])}],n=(s(4114),function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"text-center mt-5 mb-5"}),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2"},[e("aside",[e("h6",[t._v("Sort By")]),e("div",{staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"subject",value:"subject",name:""},domProps:{checked:t._q(t.attribute,"subject")},on:{change:function(e){t.attribute="subject"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"subject"}},[t._v("Subject")])]),e("div",{staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"location",value:"location",name:""},domProps:{checked:t._q(t.attribute,"location")},on:{change:function(e){t.attribute="location"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"location"}},[t._v("Location")])]),e("div",{staticClass:"custom-control custom-radio mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"price",value:"price",name:""},domProps:{checked:t._q(t.attribute,"price")},on:{change:function(e){t.attribute="price"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"price"}},[t._v("Price")])]),e("div",{staticClass:"custom-control custom-radio mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"availability",value:"availability",name:""},domProps:{checked:t._q(t.attribute,"availability")},on:{change:function(e){t.attribute="availability"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"availability"}},[t._v("Availability")])]),e("h6",{staticClass:"mt-4"},[t._v("Order By")]),t._m(0),t._m(1)])]),e("div",{staticClass:"col-md-10 row"},[t.lessons.length>0?e("div",{staticClass:"row grid-1"},t._l(t.sortedLessons,(function(s){return e("div",{key:s.id,staticClass:"col-md-4"},[e("div",{staticClass:"card mb-4"},[e("img",{staticClass:"card-img",attrs:{src:`https://cw2-backend.onrender.com/${s.image}`,alt:"Lesson Image"}}),e("div",{staticClass:"card-body"},[e("h6",[t._v("Subject: "+t._s(s.subject))]),e("h6",[t._v("Location: "+t._s(s.location))]),e("h6",[t._v("Available: "+t._s(s.availablespace))]),e("h6",[t._v("Price: £"+t._s(s.price))]),e("h6",[t._v("Rating: "),t._l(s.rating,(function(s){return e("span",{key:s.id},[t._v("★")])})),t._l(5-s.rating,(function(s){return e("span",{key:s.id},[t._v("☆")])}))],2),e("button",{staticClass:"add_to_card-btn btn",attrs:{disabled:s.availablespace<=0},on:{click:function(e){return t.addLesson(s._id,s)}}},[t._v("Add to Cart")])])])])})),0):e("div",{staticClass:"row grid-1"},[e("p",{staticStyle:{margin:"auto"}},[t._v("No result found")])])])])])])}),i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-control custom-radio mb-1"},[e("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"ascending",value:"ascending",name:""}}),e("label",{staticClass:"custom-control-label",attrs:{for:"ascending"}},[t._v("Ascending")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-control custom-radio mb-1"},[e("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"descending",value:"descending",name:""}}),e("label",{staticClass:"custom-control-label",attrs:{for:"descending"}},[t._v("Descending")])])}],r={name:"Lessons",props:["lessons"],methods:{addLesson:function(t,e){this.$emit("addLesson",t,e)}},data(){return{order:"asc",attribute:"subject",sort:{sortingMethod:"location",sortingOrder:"ascending"},sortAttributes:{Subject:"subject",Location:"location",Price:"price",Spaces:"spaces"}}},computed:{sortedLessons(){function t(t,e){return t.subject>e.subject?1:t.subject<e.subject?-1:0}function e(t,e){return t.subject>e.subject?-1:t.subject<e.subject?1:0}function s(t,e){return t.location>e.location?1:t.location<e.location?-1:0}function o(t,e){return t.location>e.location?-1:t.location<e.location?1:0}function a(t,e){return t.price>e.price?1:t.price<e.price?-1:0}function c(t,e){return t.price>e.price?-1:t.price<e.price?1:0}function n(t,e){return t.space>e.space?1:t.space<e.space?-1:0}function i(t,e){return t.space>e.space?-1:t.space<e.space?1:0}return"asc"==this.order?"subject"==this.attribute?this.lessons.sort(t):"location"==this.attribute?this.lessons.sort(s):"price"==this.attribute?this.lessons.sort(a):this.lessons.sort(n):"subject"==this.attribute?this.lessons.sort(e):"location"==this.attribute?this.lessons.sort(o):"price"==this.attribute?this.lessons.sort(c):this.lessons.sort(i)}}},l=r,u=s(1656),d=(0,u.A)(l,n,i,!1,null,null,null),h=d.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container mt-5 mb-5"},[e("div",{staticClass:"row"},t._l(t.cartItems,(function(s,o){return e("div",{key:s.lessonID,staticClass:"col-md-3 mb-4"},[e("div",{staticClass:"card"},[e("img",{staticClass:"card-img",attrs:{src:`https://cw2-backend.onrender.com/${s.lesson.image}`,alt:"Lesson Image"}}),e("div",{staticClass:"card-body"},[e("h6",[t._v("Subject: "+t._s(s.lesson.title))]),e("h6",[t._v("Location: Location: "+t._s(s.lesson.location))]),e("h6",[t._v("Price: £"+t._s(s.lesson.price))]),e("button",{staticClass:"btn add_to_card-btn",on:{click:function(e){return t.removeLesson(o)}}},[t._v("Remove from Cart")])])])])})),0),e("h2",{staticClass:"text-center mt-5 mb-5"},[t._v("Checkout")]),e("form",{staticClass:"mb-5",attrs:{action:"#"}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"col"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkOutName,expression:"checkOutName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter Name",required:""},domProps:{value:t.checkOutName},on:{keyup:t.validateRegexCheckOut,input:function(e){e.target.composing||(t.checkOutName=e.target.value)}}})]),e("div",{staticClass:"col"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkOutNumber,expression:"checkOutNumber"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Phone Number",required:""},domProps:{value:t.checkOutNumber},on:{keyup:t.validateRegexCheckOut,input:function(e){e.target.composing||(t.checkOutNumber=e.target.value)}}})]),e("input",{staticClass:"btn add_to_card-btn",staticStyle:{"margin-bottom":"50px"},attrs:{disabled:t.cannotCheckOut,type:"submit",value:"Place Order"},on:{click:function(e){return t.checkOut(t.checkOutName,t.checkOutNumber)}}})])])])])},v=[],p={name:"Checkout",props:["cartItems"],data(){return{checkOutName:"",checkOutNumber:"",cannotCheckOut:!0}},methods:{removeLesson:function(t){this.$emit("removeLesson",t)},validateRegexCheckOut:function(){var t=/^[a-zA-Z ]*$/,e=/^\d+$/;this.checkOutName.match(t)&&this.checkOutNumber.match(e)?this.cannotCheckOut=!1:this.cannotCheckOut=!0},checkOut:function(t,e){this.$emit("checkOut",t,e)}}},b=p,f=(0,u.A)(b,m,v,!1,null,null,null),C=f.exports,g={name:"App",components:{Lessons:h,Checkout:C},data(){return{lessons:[],cartItems:[],showProduct:!0,searchTxt:""}},methods:{addLessonToCart:function(t,e){const s=this.lessons.findIndex((e=>e._id===t));-1!=s&&(console.log("heeeree"),this.lessons[s].availablespace-=1),this.addToCart(t,e)},updateShowProduct:function(){this.showProduct=!this.showProduct},addToCart:function(t,e){console.log("here");const s=this.cartItems.findIndex((e=>e.lessonID===t));-1!=s?this.cartItems[s].availablespace+=1:this.cartItems.push({lessonID:t,availablespace:1,lesson:e})},removeLessonFromCart:function(t){this.cartItems[t].availablespace=this.cartItems[t].availablespace-1;const e=this.lessons.findIndex((e=>e._id===this.cartItems[t].lessonID));-1!=e&&(this.lessons[e].availablespace+=1),0==this.cartItems[t].availablespace&&this.cartItems.splice(t,1),0==this.cartItems.length&&(this.showProduct=!0),console.log(this.cartItems)},cartCount:function(){let t=0;for(let e=0;e<this.cartItems.length;e++)t+=this.cartItems[e].availablespace;return t},searchLessons:function(){fetch("https://cw2-backend.onrender.com/products/"+this.searchTxt).then((t=>{t.json().then((t=>{console.log(t),this.lessons=t,console.log(this.lessons)}))}))},checkOut:function(t,e){fetch("https://cw2-backend.onrender.com/collection/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,phone:e,lessons:this.cartItems})}).then((t=>t.json())).then((t=>{console.log("Success:",t)}));for(let s=0;s<this.cartItems.length;s++){const t=this.cartItems[s].lesson;fetch(`https://cw2-backend.onrender.com/collection/proucts/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({availablespace:t.availablespace})}).then((t=>t.json())).then((t=>{console.log("Success:",t)}))}this.showProduct=!0,this.cartItems=[],this.$swal({title:"Check out successful",text:"Your order has been submitted",icon:"success"})},fetchLesson:function(t){const e=this.lessons.findIndex((e=>e._id===t));if(-1!=e)return this.lessons[e]},unregisterAllServiceWorkers(){navigator.serviceWorker.getRegistrations().then((function(t){for(let e of t)e.unregister()})),console.log("ServiceWorkers Unregistered")},deleteAllCaches(){caches.keys().then((function(t){for(let e of t)caches.delete(e)})),console.log("All Caches Deleted")}},created:function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("../service-worker.js"),fetch("https://cw2-backend.onrender.com/collection/products").then((t=>{t.json().then((t=>{console.log(t),this.lessons=t,console.log(this.lessons+"Fetched")}))}))}},_=g,k=(0,u.A)(_,a,c,!1,null,null,null),y=k.exports;o.Ay.config.productionTip=!1,new o.Ay({render:t=>t(y)}).$mount("#app")}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var c=e[o]={exports:{}};return t[o].call(c.exports,c,c.exports,s),c.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,c){if(!o){var n=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],c=t[u][2];for(var i=!0,r=0;r<o.length;r++)(!1&c||n>=c)&&Object.keys(s.O).every((function(t){return s.O[t](o[r])}))?o.splice(r--,1):(i=!1,c<n&&(n=c));if(i){t.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}c=c||0;for(var u=t.length;u>0&&t[u-1][2]>c;u--)t[u]=t[u-1];t[u]=[o,a,c]}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,c,n=o[0],i=o[1],r=o[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(r)var u=r(s)}for(e&&e(o);l<n.length;l++)c=n[l],s.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return s.O(u)},o=self["webpackChunkcw3_individual"]=self["webpackChunkcw3_individual"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(2927)}));o=s.O(o)})();
//# sourceMappingURL=app.11ca81b3.js.map